!function e(t,n,i){function s(r,a){if(!n[r]){if(!t[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){var n=t[r][1][e];return s(n?n:e)},l,l.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({"./js/Main.js":[function(e){var t=e("./LevelLoader");$(function(){t("titles")})},{"./LevelLoader":"/Users/gregtatum/Dropbox/greg-sites/polar/js/LevelLoader.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/Components/Hid.js":[function(e,t){var n=e("../utils/EventDispatcher");window.HIDtype="keys";var i=function(e){this.poem=e;var t={up:!1,down:!1,left:!1,right:!1,spacebar:!1};this.keyCodes={k38:"up",k40:"down",k37:"left",k39:"right",k32:"spacebar"},this.tilt={x:0,y:0},this.pressed=_.clone(t),this.down=_.clone(t),this.up=_.clone(t),"keys"===window.HIDtype?this.setKeyHandlers():this.setTiltHandlers()};i.prototype={setKeyHandlers:function(){$(window).on("keydown.HID",this.keydown.bind(this)),$(window).on("keyup.HID",this.keyup.bind(this)),this.poem.on("destroy",function(){$(window).off("keydown.HID"),$(window).off("keyup.HID")})},setTiltHandlers:function(){$(window).on("deviceorientation.HID",this.handleTilt.bind(this)),$("canvas").on("touchstart.HID",this.handleTouchStart.bind(this)),$("canvas").on("touchend.HID",this.handleTouchEnd.bind(this)),this.poem.on("destroy",function(){$(window).off("deviceorientation.HID"),$("canvas").off("touchstart.HID"),$("canvas").off("touchend.HID")})},type:function(){return window.HIDtype},setKeys:function(){window.HIDtype="keys"},setTilt:function(){window.HIDtype="tilt"},keydown:function(e){var t=this.keyCodes["k"+e.keyCode];t&&(this.down[t]=!0,this.pressed[t]=!0)},keyup:function(e){var t=this.keyCodes["k"+e.keyCode];t&&(this.pressed[t]=!1,this.up[t]=!0)},handleTilt:function(e){var t,n,i;t=e.originalEvent,n=window.orientation||screen.orientation,i=_.isObject(screen.orientation)?screen.orientation.angle:_.isNumber(window.orientation)?window.orientation:0,this.tilt=0===i?{x:t.gamma,y:-1*t.beta}:i>0?{x:t.beta,y:t.gamma}:{x:-1*t.beta,y:-1*t.gamma}},handleTouchStart:function(e){e.preventDefault(),this.pressed.spacebar=!0},handleTouchEnd:function(e){var t=e.originalEvent.touches;this.pressed.spacebar=0!==t.length},update:function(){var e=function(e,t,n){n[t]=!1};return function(){_.each(this.down,e),_.each(this.up,e)}}()},n.prototype.apply(i.prototype),t.exports=i},{"../utils/EventDispatcher":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/EventDispatcher.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/LevelLoader.js":[function(e,t){var n=e("./Poem"),i=e("./levels"),s=null,o=null;window.LevelLoader=function(e){o&&o.destroy(),s=i[e],o=new n(s),window.poem=o},t.exports=LevelLoader},{"./Poem":"/Users/gregtatum/Dropbox/greg-sites/polar/js/Poem.js","./levels":"/Users/gregtatum/Dropbox/greg-sites/polar/js/levels/index.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/Poem.js":[function(e,t){var n,i=e("./utils/Coordinates"),s=e("./components/Camera"),o=e("./managers/Gun"),r=e("./Ship"),a=e("./components/Stars"),u=(e("./managers/AsteroidField"),e("./utils/Stats")),c=e("./utils/EventDispatcher"),l=(e("./entities/JellyShip"),e("./managers/EntityManager"),e("./components/ScoringAndWinning")),h=e("./utils/Clock"),p=function(e){this.circumference=e.config.circumference||750,this.height=e.config.height||120,this.r=e.config.r||240,this.circumferenceRatio=2*Math.PI/this.circumference,this.ratio=window.devicePixelRatio>=1?window.devicePixelRatio:1,this.controls=void 0,this.div=document.getElementById("container"),this.scene=new THREE.Scene,this.requestedFrame=void 0,this.clock=new h,this.coordinates=new i(this),this.camera=new s(this,e.config),this.scene.fog=new THREE.Fog(2236962,this.camera.object.position.z/2,2*this.camera.object.position.z),this.gun=new o(this),this.ship=new r(this),this.stars=new a(this,e.config.stars),this.scoringAndWinning=new l(this,e.config.scoringAndWinning),this.parseLevel(e),this.dispatch({type:"levelParsed"}),n||this.addRenderer(),this.addEventListeners(),this.loop()};t.exports=p,p.prototype={parseLevel:function(e){_.each(e.objects,function(e,t){this[t]=_.isObject(e)?new e.object(this,e.properties):e},this)},addRenderer:function(){n=new THREE.WebGLRenderer({alpha:!0}),n.setSize(window.innerWidth,window.innerHeight),this.div.appendChild(n.domElement)},addStats:function(){this.stats=new u,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",$("#container").append(this.stats.domElement)},addEventListeners:function(){$(window).on("resize",this.resizeHandler.bind(this))},resizeHandler:function(){this.camera.resize(),n.setSize(window.innerWidth,window.innerHeight)},loop:function(){this.requestedFrame=requestAnimationFrame(this.loop.bind(this)),this.update()},update:function(){this.dispatch({type:"update",dt:this.clock.getDelta(),time:this.clock.time}),n.render(this.scene,this.camera.object)},destroy:function(){window.cancelAnimationFrame(this.requestedFrame),this.dispatch({type:"destroy"})}},c.prototype.apply(p.prototype)},{"./Ship":"/Users/gregtatum/Dropbox/greg-sites/polar/js/Ship.js","./components/Camera":"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Camera.js","./components/ScoringAndWinning":"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/ScoringAndWinning.js","./components/Stars":"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Stars.js","./entities/JellyShip":"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/JellyShip.js","./managers/AsteroidField":"/Users/gregtatum/Dropbox/greg-sites/polar/js/managers/AsteroidField.js","./managers/EntityManager":"/Users/gregtatum/Dropbox/greg-sites/polar/js/managers/EntityManager.js","./managers/Gun":"/Users/gregtatum/Dropbox/greg-sites/polar/js/managers/Gun.js","./utils/Clock":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/Clock.js","./utils/Coordinates":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/Coordinates.js","./utils/EventDispatcher":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/EventDispatcher.js","./utils/Stats":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/Stats.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/Ship.js":[function(e,t){var n=e("./components/Hid"),i=e("./components/Damage"),s=function(e){this.poem=e,this.scene=e.scene,this.polarObj=new THREE.Object3D,this.object=null,this.hid=new n(this.poem),this.color=4890087,this.linewidth=2*this.poem.ratio,this.radius=3,this.position=new THREE.Vector2,this.dead=!1,this.lives=3,this.invulnerable=!0,this.invulnerableLength=3e3,this.invulnerableTime=0+this.invulnerableLength,this.invulnerableflipFlop=!1,this.invulnerableflipFlopLength=100,this.invulnerableflipFlopTime=0,this.speed=0,this.edgeAvoidanceBankSpeed=.04,this.edgeAvoidanceThrustSpeed=.001,this.thrustSpeed=.001,this.thrust=0,this.bankSpeed=.06,this.bank=0,this.maxSpeed=500,this.addObject(),this.damage=new i(this.poem,this),this.poem.on("update",this.update.bind(this))};t.exports=s,s.prototype={createGeometry:function(){var e,t,n,i;return e=new THREE.Geometry,t=[[50,36.9],[39.8,59.6],[47.1,53.9],[50,57.5],[53,53.9],[60.2,59.6],[50,36.9]],n=_.reduce(t,function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]),i=[n[0]/t.length,n[1]/t.length],e.vertices=_.map(t,function(e){var t=.25;return new THREE.Vector3((e[1]-i[1])*t*-1,(e[0]-i[0])*t,0)}),e},addObject:function(){var e,t;e=this.createGeometry(),t=new THREE.LineBasicMaterial({color:this.color,linewidth:this.linewidth}),this.object=new THREE.Line(e,t,THREE.LineStrip),this.object.position.z+=this.poem.r,this.polarObj.add(this.object),this.reset(),this.scene.add(this.polarObj)},disable:function(){this.dead=!0,this.object.visible=!1},kill:function(e){if(!e&&!this.dead&&!this.invulnerable){this.dead=!0,this.object.visible=!1,this.damage.explode();var t=Math.ceil(this.poem.scoringAndWinning.score/-2);this.poem.scoringAndWinning.adjustScore(t,t+" points",{"font-size":"2em",color:"red"}),setTimeout(function(){this.dead=!1,this.invulnerable=!0,this.invulnerableTime=this.poem.clock.time+this.invulnerableLength,this.object.visible=!0,this.reset()}.bind(this),2e3)}},reset:function(){this.position.x=0,this.position.y=0,this.speed=.2,this.bank=0},update:function(e){this.dead||(this.updateThrustAndBank(e),this.updateEdgeAvoidance(e),this.updatePosition(e),this.updateFiring(e),this.updateInvulnerability(e)),this.damage.update(e),this.hid.update(e)},updateInvulnerability:function(e){this.invulnerable&&(e.time<this.invulnerableTime?e.time>this.invulnerableflipFlopTime&&(this.invulnerableflipFlopTime=e.time+this.invulnerableflipFlopLength,this.invulnerableflipFlop=!this.invulnerableflipFlop,this.object.visible=this.invulnerableflipFlop):(this.object.visible=!0,this.invulnerable=!1))},updateThrustAndBank:function(e){var t,n,i,s;if(this.bank*=.9,this.thrust=0,"keys"===this.hid.type())t=this.hid.pressed,t.up&&(this.thrust+=this.thrustSpeed*e.dt),t.down&&(this.thrust-=this.thrustSpeed*e.dt),t.left&&(this.bank=this.bankSpeed),t.right&&(this.bank=-1*this.bankSpeed);else{n=this.hid.tilt;var o=Math.sqrt(n.x*n.x+n.y*n.y);this.thrust=Math.min(.0011,o/1e4),this.thrust*=e.dt,i=Math.atan2(n.y,n.x),s=(i-this.object.rotation.z)%(2*Math.PI),s>Math.PI?s-=2*Math.PI:s<-Math.PI&&(s+=2*Math.PI),this.bank=s*o/2500*e.dt}},updateEdgeAvoidance:function(){var e,t,n,i,s,o;t=this.poem.height/2,e=.8*t,n=this.object.position.y,o=Math.abs(n);this.object.rotation.z/Math.PI;if(this.object.rotation.z%=2*Math.PI,this.object.rotation.z<0&&(this.object.rotation.z+=2*Math.PI),Math.abs(n)>e){var r=this.object.rotation.z>=.5*Math.PI&&this.object.rotation.z<1.5*Math.PI;s=n>0?r?1:-1:r?-1:1,i=(o-e)/(t-e),this.thrust+=i*this.edgeAvoidanceThrustSpeed,this.object.rotation.z+=s*i*this.edgeAvoidanceBankSpeed}},updateFiring:function(){this.hid.pressed.spacebar&&this.poem.gun.fire(this.position.x,this.position.y,2,this.object.rotation.z)},updatePosition:function(){new THREE.Vector3;return function(){var e;this.object.rotation.z+=this.bank,e=this.object.rotation.z,this.speed*=.98,this.speed+=this.thrust,this.speed=Math.min(this.maxSpeed,this.speed),this.speed=Math.max(0,this.speed),this.position.x+=this.speed*Math.cos(e),this.position.y+=this.speed*Math.sin(e),this.object.position.y=this.position.y,this.polarObj.rotation.y=this.position.x*this.poem.circumferenceRatio}}()}},{"./components/Damage":"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Damage.js","./components/Hid":"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Hid.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Camera.js":[function(e,t){var n=function(e,t){this.poem=e,this.polarObj=new THREE.Object3D,this.speed=.032,this.object=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,3,1e3);var n=t.cameraMultiplier?t.cameraMultiplier:1.5;this.object.position.z=this.poem.r*n,this.polarObj.add(this.object),this.poem.scene.add(this.polarObj),this.poem.on("update",this.update.bind(this))};t.exports=n,n.prototype={resize:function(){this.object.aspect=window.innerWidth/window.innerHeight,this.object.updateProjectionMatrix()},update:function(){{var e=this.polarObj.rotation.y,t=this.poem.ship.polarObj.rotation.y;Math.abs(e-t)}this.polarObj.rotation.y=t*this.speed+e*(1-this.speed)}}},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/CameraIntro.js":[function(e,t){var n=function(e,t){this.poem=e,this.poem.camera.object.position.y=5*this.poem.height,this.origin=t.origin?t.origin:new THREE.Vector3,this.speed=t.speed?t.speed:.98,this.boundUpdate=this.update.bind(this),this.poem.on("update",this.boundUpdate)};n.prototype={update:function(){this.poem.camera.object.position.y*=this.speed,this.poem.camera.object.lookAt(this.origin),this.poem.camera.object.position.y<.1&&this.poem.off("update",this.boundUpdate)}},t.exports=n},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/CylinderLines.js":[function(e,t){function n(e,t,n,s,o,r){for(var a,u,c=0;e>c;c++)a=c/e,u=1-a,i(t,Math.floor((n-3)*u)+3,s*u,o*u*u,r)}function i(e,t,n,i,u){for(var c,l,h,p,d,g,m,f,b,v,y=1-u,x=1+u,j=s/t,w=3,E=0;t>=E;E++)v=i*Math.sin(j*E*w)*.4,c=o(j*E)*n*a.range(y,x),l=r(j*E)*n*a.range(y,x),d=i*a.range(y,x)+v,E>0?(E===t&&(c=m,l=f,d=b),e.push(new THREE.Vector3(c,.5*d,l)),e.push(new THREE.Vector3(c,d*-.5,l)),e.push(new THREE.Vector3(c,.5*d,l)),e.push(new THREE.Vector3(h,.5*g,p)),e.push(new THREE.Vector3(c,d*-.5,l)),e.push(new THREE.Vector3(h,g*-.5,p))):(m=c,f=l,b=d),h=c,p=l,g=d;return geometry}var s=2*Math.PI,o=Math.cos,r=Math.sin,a=e("../utils/random.js"),u=function(e,t){this.poem=e;var i=.5,s=.5,o=.5,r=new THREE.Geometry,a=(e.r*(_.isNumber(t.heightPercentage)?t.radiusPercentage:.8),e.r*(_.isNumber(t.radiusPercentage)?t.radiusPercentage:.8)),u=_.isNumber(t.sides)?t.sides:15,c=_.isNumber(t.eccentricity)?t.eccentricity:.05,l=_.isNumber(t.iterations)?t.iterations:10;n(l,r.vertices,u,a,e.height,c);var h=new THREE.LineBasicMaterial({color:this.color,linewidth:this.linewidth,fog:!0});this.object=new THREE.Line(r,h,THREE.LinePieces),this.poem.scene.add(this.object),this.poem.on("update",function(e){i=(i+2e-4*e.dt)%1,h.color.setHSL(i,o,s)}.bind(this))};t.exports=u},{"../utils/random.js":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/random.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Damage.js":[function(e,t){var n=e("underscore"),i=e("../utils/random.js"),s=e("../entities/Bullet"),o=e("../sound/SoundGenerator"),r=function(e,t,i){this.poem=e,this.ship=t,this.perExplosion=100,this.retainExplosionsCount=3,this.bullets=[],this.explodeSpeed=3,this.transparent=!1,this.opacity=1,this.explosionCount=0,this.explosionSound=null,n.isObject(i)&&n.extend(this,i),this.count=this.perExplosion*this.retainExplosionsCount,this.addObject(),this.addSound()};r.prototype={generateGeometry:function(){var e,t;geometry=new THREE.Geometry;for(var n=0;n<this.count;n++)e=new THREE.Vector3,t=new s(this.poem,this,e),geometry.vertices.push(e),this.bullets.push(t),t.kill(),t.position.y=1e3;return geometry},addObject:function(){var e;e=this.generateGeometry(),this.object=new THREE.PointCloud(e,new THREE.PointCloudMaterial({size:1*this.poem.ratio,color:this.ship.color,transparent:this.transparent,opacity:this.opacity})),this.object.frustumCulled=!1,this.poem.scene.add(this.object)},addSound:function(){var e=this.explosionSound=new o;e.connectNodes([e.makeOscillator("sawtooth"),e.makeGain(),e.getDestination()]),e.setGain(0,0,0),e.start()},reset:function(){n.each(this.bullets,function(e){e.kill()})},explode:function(){this.playExplosionSound(),n.each(n.sample(this.bullets,this.perExplosion),function(e){var t=i.range(0,2*Math.PI),n=i.rangeLow(0,this.explodeSpeed);e.alive=!0,e.position.copy(this.ship.position),e.speed.x=n*Math.cos(t),e.speed.y=n*Math.sin(t)}.bind(this))},playExplosionSound:function(){var e=500,t=this.explosionSound;t.setGain(.5,0,.001),t.setFrequency(e,0,0);var n=.02,i=6,s=1;for(s=1;i>s;s++)t.setFrequency(e*Math.random(),n*s,n);t.setGain(0,n*i,.2),t.setFrequency(.21*e,n*i,.05)},update:function(e){n.each(this.bullets,function(t){t.update(e),t.speed.multiplyScalar(.999)}),this.object.geometry.verticesNeedUpdate=!0}},t.exports=r},{"../entities/Bullet":"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/Bullet.js","../sound/SoundGenerator":"/Users/gregtatum/Dropbox/greg-sites/polar/js/sound/SoundGenerator.js","../utils/random.js":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/random.js",underscore:"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/underscore/underscore.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Hid.js":[function(e,t){t.exports=e("/Users/gregtatum/Dropbox/greg-sites/polar/js/Components/Hid.js")},{"/Users/gregtatum/Dropbox/greg-sites/polar/js/Components/Hid.js":"/Users/gregtatum/Dropbox/greg-sites/polar/js/Components/Hid.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/ScoringAndWinning.js":[function(e,t){var n=function(e,t){t=_.isObject(t)?t:{},this.poem=e,this.$score=$("#score"),this.$enemiesCount=$("#enemies-count"),this.$win=$(".win"),this.$winScore=$("#win-score"),this.$winText=this.$win.find("h1:first"),this.$scoreMessage=$("#score-message"),this.$nextLevel=$("#next-level"),this.score=0,this.enemiesCount=0,this.scoreMessageId=0,this.message=_.isString(t.message)?t.message:"You Win",this.nextLevel=t.nextLevel?t.nextLevel:null,this.won=!1,this.conditionsCount=_.isArray(t.conditions)?t.conditions.length:0,this.conditionsRemaining=this.conditionsCount,this.poem.on("levelParsed",function(){this.setConditions(t.conditions)}.bind(this))};t.exports=n,n.prototype={setConditions:function(e){_.each(e,function(e){var t=this.poem[e.component],n=_.union(this,e.properties);t.watchForCompletion.apply(t,n)}.bind(this))},reportConditionCompleted:function(){this.conditionsRemaining--,0===this.conditionsRemaining&&(this.poem.ship.disable(),this.won=!0,this.showWinScreen())},adjustEnemies:function(e){return this.enemiesCount+=e,this.$enemiesCount.text(this.enemiesCount),this.enemiesCount},adjustScore:function(e,t,n){return this.won?void 0:(this.score+=e,this.$score.text(this.score),t&&this.showMessage(t,n),this.score)},showMessage:function(e,t){var n=$("<span></span>").text(e);t&&n.css(t),this.$scoreMessage.hide(),this.$scoreMessage.empty().append(n),this.$scoreMessage.removeClass("fadeout"),this.$scoreMessage.addClass("fadein"),this.$scoreMessage.show(),this.$scoreMessage.removeClass("fadein");var i=++this.scoreMessageId;setTimeout(function(){i===this.scoreMessageId&&this.$scoreMessage.addClass("fadeout")}.bind(this),2e3)},showWinScreen:function(){this.$winScore.text(this.score),this.$win.show(),this.$win.css({opacity:1}),this.$winText.html(this.message),this.$nextLevel.one("click",function(){LevelLoader(this.nextLevel),this.$win.hide()}.bind(this))}}},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Stars.js":[function(e,t){var n=function(e,t){t=_.isObject(t)?t:{},this.poem=e,this.object=null,this.count=_.isNumber(t.count)?t.count:4e4,this.depth=7.5,this.color=11184810,this.addObject()};t.exports=n,n.prototype={generateGeometry:function(){var e,t,n,i,s,o;o=new THREE.Geometry;for(var r=0;r<this.count;r++)e=Math.random()*this.depth*this.poem.r,e<this.poem.r&&(e=Math.random()*this.depth*this.poem.r),t=2*Math.random()*Math.PI,n=Math.cos(t)*e,s=Math.sin(t)*e,i=(.5-Math.random())*this.depth*this.poem.r,o.vertices.push(new THREE.Vector3(n,i,s));return o},addObject:function(){var e;e=this.generateGeometry(),this.object=new THREE.PointCloud(e,new THREE.PointCloudMaterial({size:.5*this.poem.ratio,color:this.color,fog:!1})),this.poem.scene.add(this.object)}}},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Titles.js":[function(e,t){var n=e("../Components/Hid"),i=function(e){this.poem=e,this.poem.ship.disable(),this.rotateStars(),$("a[href=#keys]").click(this.handleKeysClick.bind(this)),$("a[href=#tilt]").click(this.handleTiltClick.bind(this)),$("#title").removeClass("hide").show(),$(".score").css("opacity",0),this.webglCheck()};t.exports=i,i.prototype={webglEnabled:function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}(),webglCheck:function(){this.webglEnabled||($("a[href=#keys]").hide(),$("a[href=#tilt]").hide(),$(".title-webgl-error").show())},handleKeysClick:function(e){e.preventDefault(),n.prototype.setKeys(),this.nextLevel()},handleTiltClick:function(e){e.preventDefault(),n.prototype.setTilt(),this.nextLevel()},nextLevel:function(){$("#title").addClass("hide"),$(".score").css("opacity",1),LevelLoader("intro"),setTimeout(function(){$("#title").hide()}.bind(this),1e3)},rotateStars:function(){this.poem.on("update",function(e){this.poem.stars.object.rotation.y-=1e-4*e.dt}.bind(this))}}},{"../Components/Hid":"/Users/gregtatum/Dropbox/greg-sites/polar/js/Components/Hid.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/Asteroid.js":[function(e,t){var n=e("underscore"),i=function(e,t,n,i){this.poem=e,this.object=null,this.position=new THREE.Vector2,this.position.x=t||0,this.position.y=n||0,this.oscillation=0,this.radius=i||5,this.speed=new THREE.Vector2,this.rotationSpeed=new THREE.Vector3,this.maxSpeed=.5,this.maxRotationSpeed=.1,this.oscillationSpeed=50,this.strokeColor=14540253,this.fillColor=16777215,this.addObject(t,n),this.update()};t.exports=i,i.prototype={addObject:function(){var e=new THREE.OctahedronGeometry(this.radius,1);n.each(e.vertices,function(e){e.x+=this.radius/2*(Math.random()-.5),e.y+=this.radius/2*(Math.random()-.5),e.z+=this.radius/2*(Math.random()-.5)},this);var t=new THREE.MeshBasicMaterial({color:this.strokeColor});this.object=new THREE.Mesh(e,t);var i=new THREE.MeshBasicMaterial({color:this.fillColor,side:THREE.BackSide}),s=new THREE.Mesh(e,i);s.scale.multiplyScalar(1.05),this.object.add(s),this.poem.scene.add(this.object),this.speed.x=(.5-Math.random())*this.maxSpeed,this.speed.y=(.5-Math.random())*this.maxSpeed,this.rotationSpeed.x=(.5-Math.random())*this.maxRotationSpeed,this.rotationSpeed.y=(.5-Math.random())*this.maxRotationSpeed,this.rotationSpeed.z=(.5-Math.random())*this.maxRotationSpeed,this.oscillation=Math.random()*Math.PI*2*this.oscillationSpeed},update:function(){this.oscillation+=this.speed.y,this.position.x+=this.speed.x,this.position.y=Math.sin(this.oscillation/this.oscillationSpeed)*this.poem.height,this.object.rotation.x+=this.rotationSpeed.x,this.object.rotation.y+=this.rotationSpeed.y,this.object.rotation.z+=this.rotationSpeed.z,this.poem.coordinates.setVector(this.object.position,this.position)}}},{underscore:"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/underscore/underscore.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/Bullet.js":[function(e,t){var n=function(e,t,n){this.poem=e,this.gun=t,this.vertex=n,this.speed=new THREE.Vector2(0,0),this.position=new THREE.Vector2(0,0),this.radius=1,this.bornAt=0,this.alive=!1};t.exports=n,n.prototype={kill:function(){this.vertex.set(0,0,1e3),this.alive=!1},update:function(){this.position.x+=this.speed.x,this.position.y+=this.speed.y,this.poem.coordinates.setVector(this.vertex,this.position)},fire:function(e,t,n,i){this.poem.coordinates.setVector(this.vertex,e,t),this.position.set(e,t),this.speed.x=Math.cos(i)*n,this.speed.y=Math.sin(i)*n,this.bornAt=this.poem.clock.time,this.alive=!0}}},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/JellyShip.js":[function(e,t){var n=e("../components/Damage"),i=e("../utils/random"),s=function(e,t,i,s){this.poem=e,this.manager=t,this.scene=e.scene,this.polarObj=new THREE.Object3D,this.object=null,this.name="Jellyship",this.color=13317866,this.cssColor="#CB36EA",this.linewidth=2*this.poem.ratio,this.scoreValue=13,this.spawnPoint=new THREE.Vector2(i,s),this.position=new THREE.Vector2(i,s),this.dead=!1,this.speed=0,this.edgeAvoidanceBankSpeed=.04,this.edgeAvoidanceThrustSpeed=.001,this.thrustSpeed=1,this.thrust=0,this.bankSpeed=.06,this.bank=0,this.maxSpeed=1e3,this.radius=3,this.addObject(),this.damage=new n(this.poem,this,{transparent:!0,opacity:.5,retainExplosionsCount:3,perExplosion:50}),this.handleUpdate=this.update.bind(this),this.manager.on("update",this.handleUpdate)};t.exports=s,s.prototype={initSharedAssets:function(e){var t=this.createGeometry();e.shared.geometry=t,e.on("update",s.prototype.updateWaveyVerts(t))},updateWaveyVerts:function(e){return function(t){_.each(e.waveyVerts,function(e){e.y=.8*Math.sin(t.time/100+e.x)+e.original.y})}},createGeometry:function(){var e,t,n,i;return e=new THREE.Geometry,t=[[355.7,211.7],[375.8,195.9],[368.5,155.4],[361.4,190.8],[341.3,205.9],[320.4,201.8],[298.9,206],[278.6,190.8],[271.5,155.4],[264.2,195.9],[284.7,212],[258.3,239.2],[242.3,228.5],[238.3,168.9],[226.1,237.1],[246.7,266.2],[233.7,316.4],[259.2,321.2],[257.1,331.3],[254.9,342.3],[252.8,352.9],[250.5,364.5],[248.2,375.7],[246.1,386.2],[243.8,397.7],[241.3,410.3],[239.5,419.3],[237.4,429.6],[253.1,432.7],[254.9,423.7],[256.9,414.1],[259.3,401.8],[261.6,390.2],[263.7,380.1],[266.1,367.8],[268.3,356.9],[270.6,345.6],[272.7,335.1],[274.9,324.2],[293,327.6],[292.6,336.5],[292.2,348],[291.7,359.6],[291.2,371.5],[290.7,382.5],[290.3,393.6],[289.8,405.1],[289.5,414.1],[289,425.6],[288.5,437],[288.1,448.5],[287.6,459.5],[287.1,471.5],[286.6,484],[302.6,484.6],[303.1,473.5],[303.6,461.5],[304.1,448.5],[304.5,438.5],[305,425.1],[305.4,416.1],[305.9,405],[306.2,395.5],[306.6,386],[307.1,373],[307.6,361],[308.2,347.5],[308.5,338.5],[308.9,330.6],[331.1,330.8],[331.4,336.5],[331.7,344],[332,353],[332.5,364.5],[333,376],[333.4,387.5],[333.9,398.5],[334.4,410.5],[334.9,422.4],[335.4,437],[336,450],[336.4,460],[336.8,471],[337.4,484.6],[353.4,484],[352.8,471],[352.3,457.5],[351.9,448],[351.5,437.5],[350.9,423],[350.4,410.5],[349.8,396.5],[349.4,385.5],[348.9,374.4],[348.5,363.4],[348,352],[347.6,343],[347.3,334],[347,327.8],[365.1,324.3],[366.6,331.7],[368.2,339.6],[370.2,349.5],[371.9,357.8],[373.6,366.8],[375.4,375.4],[377.1,384],[379,393.5],[381.2,404.6],[383.1,414],[384.9,422.8],[386.9,432.7],[402.6,429.6],[400.6,419.6],[399.1,412.5],[397.1,402.5],[394.7,390.2],[393.1,382.6],[391.4,374],[389.6,365],[387.6,355.1],[386,347.2],[384.1,337.7],[382.7,330.6],[380.9,321.4],[407,316.4],[393.8,265.5],[413.9,237.1],[401.7,168.9],[397.7,228.5],[382.1,238.9],[355.9,211.8]],n=_.reduce(t,function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]),i=[n[0]/t.length,n[1]/t.length],e.waveyVerts=[],e.vertices=_.map(t,function(t){var n=1/32,s=new THREE.Vector3((t[1]-i[1])*n*-1,(t[0]-i[0])*n,0);return s.original=(new THREE.Vector3).copy(s),t[1]>330.8&&e.waveyVerts.push(s),s},this),e},addObject:function(){var e,t;e=this.manager.shared.geometry,t=new THREE.LineBasicMaterial({color:this.color,linewidth:this.linewidth}),this.object=new THREE.Line(e,t,THREE.LineStrip),this.object.position.z+=this.poem.r,this.polarObj.add(this.object),this.reset(),this.scene.add(this.polarObj)},kill:function(){this.dead=!0,this.object.visible=!1,this.damage.explode()},reset:function(){this.position.copy(this.spawnPoint),this.speed=.2,this.bank=0},update:function(e){this.dead?this.damage.update(e):(this.bank*=.9,this.thrust=.01,this.bank+=i.range(-.01,.01),this.object.geometry.verticesNeedUpdate=!0,this.updateEdgeAvoidance(e),this.updatePosition(e))},updateEdgeAvoidance:function(){var e,t,n,i,s,o;t=this.poem.height/2,e=.8*t,n=this.object.position.y,o=Math.abs(n);this.object.rotation.z/Math.PI;if(this.object.rotation.z%=2*Math.PI,this.object.rotation.z<0&&(this.object.rotation.z+=2*Math.PI),Math.abs(n)>e){var r=this.object.rotation.z>=.5*Math.PI&&this.object.rotation.z<1.5*Math.PI;s=n>0?r?1:-1:r?-1:1,i=(o-e)/(t-e),this.thrust+=i*this.edgeAvoidanceThrustSpeed,this.object.rotation.z+=s*i*this.edgeAvoidanceBankSpeed}this.object.rotation.z},updatePosition:function(){new THREE.Vector3;return function(){var e;this.object.rotation.z+=this.bank,e=this.object.rotation.z,this.speed*=.98,this.speed+=this.thrust,this.speed=Math.min(this.maxSpeed,this.speed),this.speed=Math.max(0,this.speed),this.position.x+=this.speed*Math.cos(e),this.position.y+=this.speed*Math.sin(e),this.object.position.y=this.position.y,this.polarObj.rotation.y=this.position.x*this.poem.circumferenceRatio}}()}},{"../components/Damage":"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Damage.js","../utils/random":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/random.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/Jellyship.js":[function(e,t){t.exports=e("/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/JellyShip.js")},{"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/JellyShip.js":"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/JellyShip.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/levels/asteroidsJellies.js":[function(e,t){t.exports={config:{scoringAndWinning:{message:"No jellies detected within 5 parsecs.<br/> Follow me on <a href='https://twitter.com/tatumcreative'>Twitter</a> for updates on new levels.",nextLevel:"titles",conditions:[{component:"jellyManager",properties:null}]}},objects:{asteroidField:{object:e("../managers/AsteroidField"),properties:{count:20}},jellyManager:{object:e("../managers/EntityManager"),properties:{entityType:e("../entities/Jellyship"),count:25}},music:{object:e("../sound/Music"),properties:{url:"https://soundcloud.com/theelectrochippers/the-end-of-our-journey"}}}}},{"../entities/Jellyship":"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/Jellyship.js","../managers/AsteroidField":"/Users/gregtatum/Dropbox/greg-sites/polar/js/managers/AsteroidField.js","../managers/EntityManager":"/Users/gregtatum/Dropbox/greg-sites/polar/js/managers/EntityManager.js","../sound/Music":"/Users/gregtatum/Dropbox/greg-sites/polar/js/sound/Music.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/levels/index.js":[function(e,t){t.exports={asteroidsJellies:e("./asteroidsJellies"),titles:e("./titles"),intro:e("./intro")}},{"./asteroidsJellies":"/Users/gregtatum/Dropbox/greg-sites/polar/js/levels/asteroidsJellies.js","./intro":"/Users/gregtatum/Dropbox/greg-sites/polar/js/levels/intro.js","./titles":"/Users/gregtatum/Dropbox/greg-sites/polar/js/levels/titles.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/levels/intro.js":[function(e,t){t.exports={config:{r:120,height:60,circumference:900,cameraMultiplier:2,scoringAndWinning:{message:"You saved this sector<br/>on to the next level.",nextLevel:"asteroidsJellies",conditions:[{component:"jellyManager",properties:null}]},stars:{count:3e3}},objects:{cylinderLines:{object:e("../components/CylinderLines"),properties:{}},cameraIntro:{object:e("../components/CameraIntro"),properties:{speed:.985}},jellyManager:{object:e("../managers/EntityManager"),properties:{entityType:e("../entities/Jellyship"),count:5}},music:{object:e("../sound/Music"),properties:{url:"https://soundcloud.com/theelectrochippers/the-sun-is-rising-chip-music"}}}}},{"../components/CameraIntro":"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/CameraIntro.js","../components/CylinderLines":"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/CylinderLines.js","../entities/Jellyship":"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/Jellyship.js","../managers/EntityManager":"/Users/gregtatum/Dropbox/greg-sites/polar/js/managers/EntityManager.js","../sound/Music":"/Users/gregtatum/Dropbox/greg-sites/polar/js/sound/Music.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/levels/titles.js":[function(e,t){t.exports={config:{},objects:{titles:{object:e("../components/Titles"),properties:{}},music:{object:e("../sound/Music"),properties:{url:"https://soundcloud.com/theelectrochippers/chiptune-space",startTime:12,volume:1}}}}},{"../components/Titles":"/Users/gregtatum/Dropbox/greg-sites/polar/js/components/Titles.js","../sound/Music":"/Users/gregtatum/Dropbox/greg-sites/polar/js/sound/Music.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/managers/AsteroidField.js":[function(e,t){var n=e("../entities/Asteroid"),i=function(e,t){this.poem=e,this.asteroids=[],this.maxRadius=50,this.originClearance=30,this.count=20,_.extend(this,t),this.generate(this.count),this.poem.on("update",this.update.bind(this)),this.poem.gun.setBarrierCollider(this.asteroids)};t.exports=i,i.prototype={generate:function(e){var t,i,s,o,r,a;for(o=4*this.poem.height,r=this.poem.circumference,t=0;e>t;t++){do i=Math.random()*r,s=Math.random()*o-o/2,a=Math.random()*this.maxRadius;while(this.checkCollision(i,s,a)&&this.checkFreeOfOrigin(i,s,a));this.asteroids.push(new n(this.poem,i,s,a))}},update:function(e){if(_.each(this.asteroids,function(t){t.update(e)},this),!this.poem.ship.dead&&!this.poem.ship.invulnerable){var t=this.checkCollision(this.poem.ship.position.x,this.poem.ship.position.y,2);t&&this.poem.ship.kill()}},checkFreeOfOrigin:function(e,t,n){return Math.sqrt(e*e+t*t)>n+this.originClearance},checkCollision:function(e,t,n){var i=_.find(this.asteroids,function(i){var s,o,r;
return s=this.poem.coordinates.circumferenceDistance(e,i.position.x),o=t-i.position.y,r=Math.sqrt(s*s+o*o),r<n+i.radius},this);return!!i}}},{"../entities/Asteroid":"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/Asteroid.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/managers/EntityManager.js":[function(e,t){var n=e("../utils/Collider"),i=e("../entities/JellyShip"),s=e("../utils/EventDispatcher"),o=function(e,t){this.poem=e,this.entityType=i,this.count=20,this.entities=[],this.liveEntities=[],this.originClearance=300,this.shared={},this.winCheck=null,_.extend(this,t),_.isFunction(this.entityType.prototype.initSharedAssets)&&this.entityType.prototype.initSharedAssets(this),this.generate(this.count),this.configureCollider(),this.boundUpdate=this.update.bind(this),this.poem.on("update",this.boundUpdate)};t.exports=o,o.prototype={generate:function(e){var t,n,i,s,o,r;for(s=4*this.poem.height,o=this.poem.circumference,t=0;e>t;t++)n=Math.random()*o,i=Math.random()*s-s/2,r=new this.entityType(this.poem,this,n,i),this.entities.push(r),this.liveEntities.push(r);this.poem.scoringAndWinning.adjustEnemies(e)},update:function(e){this.dispatch(e)},killEntity:function(e){var t=this.liveEntities.indexOf(e);t>=0&&this.liveEntities.splice(t,1),e.kill(),this.winCheck&&0===this.liveEntities.length&&(this.winCheck.reportConditionCompleted(),this.winCheck=null)},configureCollider:function(){new n(this.poem,function(){return this.liveEntities}.bind(this),function(){return this.poem.gun.liveBullets}.bind(this),function(e,t){this.killEntity(e),this.poem.gun.killBullet(t),this.poem.scoringAndWinning.adjustScore(e.scoreValue,"+"+e.scoreValue+" "+e.name,{color:e.cssColor}),this.poem.scoringAndWinning.adjustEnemies(-1)}.bind(this)),new n(this.poem,function(){return this.liveEntities}.bind(this),function(){return[this.poem.ship]}.bind(this),function(e){this.poem.ship.dead||this.poem.ship.invulnerable||(this.killEntity(e),this.poem.ship.kill(),this.poem.scoringAndWinning.adjustEnemies(-1))}.bind(this))},watchForCompletion:function(e){this.winCheck=e}},s.prototype.apply(o.prototype)},{"../entities/JellyShip":"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/JellyShip.js","../utils/Collider":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/Collider.js","../utils/EventDispatcher":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/EventDispatcher.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/managers/Gun.js":[function(e,t){var n=e("../entities/Bullet"),i=e("../utils/Collider"),s=e("../sound/SoundGenerator"),o=function(e){this.poem=e,this.object=null,this.sound=null,this.count=350,this.bulletAge=5e3,this.fireDelayMilliseconds=100,this.lastFireTimestamp=this.poem.clock.time,this.liveBullets=[],this.bullets=[],this.bornAt=0,this.addObject(),this.addSound(),this.poem.on("update",this.update.bind(this))};t.exports=o,o.prototype={fire:function(){var e=function(e){return!e.alive};return function(t,n,i,s){var o=this.poem.clock.time;if(!(o-this.lastFireTimestamp<this.fireDelayMilliseconds)){this.lastFireTimestamp=o;var r=_.find(this.bullets,e);if(r){this.liveBullets.push(r),r.fire(t,n,i,s);var a=1900;this.sound.setGain(.1,0,.001),this.sound.setFrequency(a,0,0),this.sound.setGain(0,.01,.05),this.sound.setFrequency(.1*a,.01,.05)}}}}(),generateGeometry:function(){for(var e,t,i=new THREE.Geometry,s=0;s<this.count;s++)e=new THREE.Vector3,t=new n(this.poem,this,e),i.vertices.push(e),this.bullets.push(t),t.kill();return i},killBullet:function(e){var t=this.liveBullets.indexOf(e);t>=0&&this.liveBullets.splice(t,1),e.kill(),this.object&&(this.object.geometry.verticesNeedUpdate=!0)},addObject:function(){var e;e=this.generateGeometry(),this.object=new THREE.PointCloud(e,new THREE.PointCloudMaterial({size:1*this.poem.ratio,color:16711680})),this.object.frustumCulled=!1,this.poem.scene.add(this.object)},update:function(e){for(var t,n=0;n<this.liveBullets.length;n++)t=this.liveBullets[n],t.bornAt+this.bulletAge<e.time?(this.killBullet(t),n--):t.update(e.dt);this.liveBullets.length>0&&(this.object.geometry.verticesNeedUpdate=!0)},setBarrierCollider:function(e){new i(this.poem,function(){return e}.bind(this),function(){return this.liveBullets}.bind(this),function(e,t){this.killBullet(t)}.bind(this))},addSound:function(){var e=this.sound=new s;e.connectNodes([e.makeOscillator("square"),e.makeGain(),e.getDestination()]),e.setGain(0,0,0),e.start()}}},{"../entities/Bullet":"/Users/gregtatum/Dropbox/greg-sites/polar/js/entities/Bullet.js","../sound/SoundGenerator":"/Users/gregtatum/Dropbox/greg-sites/polar/js/sound/SoundGenerator.js","../utils/Collider":"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/Collider.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/sound/Music.js":[function(e,t){var n=e("soundcloud-badge"),i=function(e,t){if("#musicoff"!==window.location.hash){var i,s=!0;n({client_id:"6057c9af862bf245d4c402179e317f52",song:t.url,dark:!1,getFonts:!1},function(e,n){if(s){if(e)throw e;i=new Audio,i.src=n,i.play(),i.loop=!0,i.volume=t.volume||.6,$(i).on("loadedmetadata",function(){i.currentTime=t.startTime||0});var o=!0;$(window).on("keydown.Music",function(e){83===e.keyCode&&(o?(i.pause(),o=!1):(i.play(),o=!0))})}}),e.on("destroy",function(){i&&(i.pause(),i=null),$(window).off("keydown.Music"),$(".npm-scb-white").remove()})}};t.exports=i},{"soundcloud-badge":"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/index.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/sound/SoundGenerator.js":[function(e,t){var n=e("underscore"),i=window.AudioContext||window.webkitAudioContext||null,s=function(){this.enabled=void 0!==i,this.enabled&&(this.totalCreated++,this.totalCreatedSq=this.totalCreated*this.totalCreated)};t.exports=s,s.prototype={context:i?new i:void 0,makePinkNoise:function(e){var t,n,i,s,o,r,a,u;return t=n=i=s=o=r=a=0,u=this.pinkNoise=this.context.createScriptProcessor(e,1,1),u.onaudioprocess=function(u){for(var c=u.outputBuffer.getChannelData(0),l=0;e>l;l++){var h=2*Math.random()-1;t=.99886*t+.0555179*h,n=.99332*n+.0750759*h,i=.969*i+.153852*h,s=.8665*s+.3104856*h,o=.55*o+.5329522*h,r=-.7616*r-.016898*h,c[l]=t+n+i+s+o+r+a+.5362*h,c[l]*=.11,a=.115926*h}},u},makeOscillator:function(e,t){var n=this.oscillator=this.context.createOscillator();return n.type=e||"sawtooth",n.frequency.value=t||2e3,n},makeGain:function(){var e=this.gain=this.context.createGain();return e.gain.value=1,e},makePanner:function(){this.context.listener.setPosition(0,0,0);var e=this.panner=this.context.createPanner();return e.panningModel="equalpower",e.coneOuterGain=.1,e.coneOuterAngle=180,e.coneInnerAngle=0,e},makeBandpass:function(){var e=this.bandpass=this.context.createBiquadFilter();return e.type="bandpass",e.frequency.value=440,e.Q.value=.5,e},getDestination:function(){return this.context.destination},connectNodes:function(e){n.each(n.rest(e),function(t,n){var i=e[n];i.connect(t)})},start:function(){this.oscillator.start(0)},totalCreated:0,setFrequency:function(e,t,n){this.enabled&&this.oscillator.frequency.setTargetAtTime(e,this.context.currentTime+t,n)},setPosition:function(e,t,n){this.enabled&&this.panner.setPosition(e,t,n)},setGain:function(e,t,n){this.enabled&&this.gain.gain.setTargetAtTime(e,this.context.currentTime+t,n)},setBandpassQ:function(e){this.enabled&&this.bandpass.Q.setTargetAtTime(e,this.context.currentTime,.1)},setBandpassFrequency:function(e){this.enabled&&this.bandpass.frequency.setTargetAtTime(e,this.context.currentTime,.1)}}},{underscore:"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/underscore/underscore.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/Clock.js":[function(e,t){var n=function(e){this.maxDt=60,this.minDt=16,this.pTime=0,this.time=0,e!==!1&&this.start()};t.exports=n,n.prototype={start:function(){this.pTime=Date.now()},getDelta:function(){var e,t;return e=Date.now(),t=e-this.pTime,t=Math.min(t,this.maxDt),t=Math.max(t,this.minDt),this.time+=t,this.pTime=e,t}}},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/Collider.js":[function(e,t){var n=e("underscore"),i=function(e,t,n,i){this.poem=e,this.getCollectionA=t,this.getCollectionB=n,this.onCollision=i,this.poem.on("update",this.update.bind(this))};t.exports=i,i.prototype={update:function(){var e=[];n.each(this.getCollectionA(),function(t){var i=n.find(this.getCollectionB(),function(e){var n,i,s;return n=this.poem.coordinates.circumferenceDistance(t.position.x,e.position.x),i=t.position.y-e.position.y,s=Math.sqrt(n*n+i*i),s<t.radius+e.radius},this);i&&e.push([t,i])},this),n.each(e,function(e){this.onCollision(e[0],e[1])},this)}}},{underscore:"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/underscore/underscore.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/Coordinates.js":[function(e,t){var n=function(e){this.poem=e,this.twoRSquared=2*this.poem.r*this.poem.r};t.exports=n,n.prototype={x:function(e){return Math.sin(e*this.poem.circumferenceRatio)*this.poem.r},y:function(e){return e},z:function(e){return Math.cos(e*this.poem.circumferenceRatio)*this.poem.r},r:function(e,t){return Math.sqrt(e*e+t*t)},theta:function(e,t){return Math.atan(t/e)},setVector:function(e){var t,n,i;return"number"==typeof arguments[1]?(t=arguments[1],n=arguments[2],e.set(this.x(t),n,this.z(t))):(i=arguments[1],e.set(this.x(i.x),i.y,this.z(i.x)))},getVector:function(e,t){var n=new THREE.Vector3;return this.setVector(n,e,t)},keepInRangeX:function(e){return e>=0?e%this.poem.circumference:e+e%this.poem.circumference},keepInRangeY:function(e){return e>=0?e%this.poem.height:e+e%this.poem.height},keepInRange:function(e){return e.x=this.keepInRangeX(e.x),e.y=this.keepInRangeX(e.y),e},twoXToTheta:function(e){return e*this.poem.circumferenceRatio},circumferenceDistance:function(e,t){var n=this.poem.circumferenceRatio;return this.twoRSquared-this.twoRSquared*Math.cos(e*n-t*n)}}},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/EventDispatcher.js":[function(e,t){var n=function(){};n.prototype={constructor:n,apply:function(e){e.on=n.prototype.on,e.hasEventListener=n.prototype.hasEventListener,e.off=n.prototype.off,e.dispatch=n.prototype.dispatch},on:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)?!0:!1},off:function(e,t){if(void 0!==this._listeners){var n=this._listeners,i=n[e];if(void 0!==i){var s=i.indexOf(t);-1!==s&&i.splice(s,1)}}},dispatch:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;var i,s=[],o=n.length;for(i=0;o>i;i++)s[i]=n[i];for(i=0;o>i;i++)s[i].call(this,e)}}}},"object"==typeof t&&(t.exports=n)},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/Stats.js":[function(e,t){var n=function(){var e=Date.now(),t=e,n=0,i=1/0,s=0,o=0,r=1/0,a=0,u=0,c=0,l=document.createElement("div");l.id="stats",l.addEventListener("mousedown",function(e){e.preventDefault(),y(++c%2)},!1),l.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",l.appendChild(h);var p=document.createElement("div");p.id="fpsText",p.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",p.innerHTML="FPS",h.appendChild(p);var d=document.createElement("div");for(d.id="fpsGraph",d.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(d);d.children.length<74;){var g=document.createElement("span");g.style.cssText="width:1px;height:30px;float:left;background-color:#113",d.appendChild(g)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",l.appendChild(m);var f=document.createElement("div");f.id="msText",f.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",f.innerHTML="MS",m.appendChild(f);var b=document.createElement("div");for(b.id="msGraph",b.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(b);b.children.length<74;){var v=document.createElement("span");v.style.cssText="width:1px;height:30px;float:left;background-color:#131",b.appendChild(v)}var y=function(e){switch(c=e){case 0:h.style.display="block",m.style.display="none";break;case 1:h.style.display="none",m.style.display="block"}},x=function(e,t){var n=e.appendChild(e.firstChild);n.style.height=t+"px"};return{REVISION:12,domElement:l,setMode:y,begin:function(){e=Date.now()},end:function(){var c=Date.now();return n=c-e,i=Math.min(i,n),s=Math.max(s,n),f.textContent=n+" MS ("+i+"-"+s+")",x(b,Math.min(30,30-n/200*30)),u++,c>t+1e3&&(o=Math.round(1e3*u/(c-t)),r=Math.min(r,o),a=Math.max(a,o),p.textContent=o+" FPS ("+r+"-"+a+")",x(d,Math.min(30,30-o/100*30)),t=c,u=0),c},update:function(){e=this.end()}}};"object"==typeof t&&(t.exports=n)},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/js/utils/random.js":[function(e,t){var n={flip:function(){return Math.random()>.5?!0:!1},range:function(e,t){return Math.random()*(t-e)+e},rangeInt:function(e,t){return Math.floor(this.range(e,t+1))},rangeLow:function(e,t){return Math.random()*Math.random()*(t-e)+e},rangeHigh:function(e,t){return(1-Math.random()*Math.random())*(t-e)+e}};t.exports=n},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/browserify/lib/_empty.js":[function(){},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/browserify/node_modules/querystring-es3/decode.js":[function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,s,o){t=t||"&",s=s||"=";var r={};if("string"!=typeof e||0===e.length)return r;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;c>l;++l){var h,p,d,g,m=e[l].replace(a,"%20"),f=m.indexOf(s);f>=0?(h=m.substr(0,f),p=m.substr(f+1)):(h=m,p=""),d=decodeURIComponent(h),g=decodeURIComponent(p),n(r,d)?i(r[d])?r[d].push(g):r[d]=[r[d],g]:r[d]=g}return r};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/browserify/node_modules/querystring-es3/encode.js":[function(e,t){"use strict";function n(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(o(e),function(o){var a=encodeURIComponent(i(o))+r;return s(e[o])?n(e[o],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[o]))}).join(t):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/browserify/node_modules/querystring-es3/index.js":[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/browserify/node_modules/querystring-es3/decode.js","./encode":"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/browserify/node_modules/querystring-es3/encode.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/index.js":[function(e,t){function n(e){if(e)throw e}function i(e,t){c||(a(".npm-scb-wrap {\n  font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-weight: 200;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 999;\n}\n\n.npm-scb-wrap a {\n  text-decoration: none;\n  color: #000;\n}\n.npm-scb-white\n.npm-scb-wrap a {\n  color: #fff;\n}\n\n.npm-scb-inner {\n  position: absolute;\n  top: -120px; left: 0;\n  padding: 8px;\n  width: 100%;\n  height: 150px;\n  z-index: 2;\n  -webkit-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n     -moz-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n      -ms-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n       -o-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n          transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n}\n.npm-scb-wrap:hover\n.npm-scb-inner {\n  top: 0;\n}\n\n.npm-scb-artwork {\n  position: absolute;\n  top: 16px; left: 16px;\n  width: 104px; height: 104px;\n  box-shadow: 0 0 8px -3px #000;\n  outline: 1px solid rgba(0,0,0,0.1);\n  z-index: 2;\n}\n.npm-scb-white\n.npm-scb-artwork {\n  outline: 1px solid rgba(255,255,255,0.1);\n  box-shadow: 0 0 10px -2px rgba(255,255,255,0.9);\n}\n\n.npm-scb-info {\n  position: absolute;\n  top: 16px;\n  left: 120px;\n  width: 300px;\n  z-index: 1;\n}\n\n.npm-scb-info > a {\n  display: block;\n}\n\n.npm-scb-now-playing {\n  font-size: 12px;\n  line-height: 12px;\n  position: absolute;\n  width: 500px;\n  z-index: 1;\n  padding: 15px 0;\n  top: 0; left: 138px;\n  opacity: 1;\n  -webkit-transition: opacity 0.25s;\n     -moz-transition: opacity 0.25s;\n      -ms-transition: opacity 0.25s;\n       -o-transition: opacity 0.25s;\n          transition: opacity 0.25s;\n}\n\n.npm-scb-wrap:hover\n.npm-scb-now-playing {\n  opacity: 0;\n}\n\n.npm-scb-white\n.npm-scb-now-playing {\n  color: #fff;\n}\n.npm-scb-now-playing > a {\n  font-weight: bold;\n}\n\n.npm-scb-info > a > p {\n  margin: 0;\n  padding-bottom: 0.25em;\n  line-height: 1.35em;\n  margin-left: 1em;\n  font-size: 1em;\n}\n\n.npm-scb-title {\n  font-weight: bold;\n}\n\n.npm-scb-icon {\n  position: absolute;\n  top: 120px;\n  padding-top: 0.75em;\n  left: 16px;\n}\n"),c=!0),h||(h=r.compile('<div class="npm-scb-wrap">\n  <div class="npm-scb-inner">\n    <a target="_blank" href="{{urls.song}}">\n      <img class="npm-scb-icon" src="{{icon}}">\n      <img class="npm-scb-artwork" src="{{artwork}}">\n    </a>\n    <div class="npm-scb-info">\n      <a target="_blank" href="{{urls.song}}">\n        <p class="npm-scb-title">{{title}}</p>\n      </a>\n      <a target="_blank" href="{{urls.artist}}">\n        <p class="npm-scb-artist">{{artist}}</p>\n      </a>\n    </div>\n  </div>\n  <div class="npm-scb-now-playing">\n    Now Playing:\n    <a href="{{urls.song}}">{{title}}</a>\n    by\n    <a href="{{urls.artist}}">{{artist}}</a>\n  </div>\n</div>\n')),!l&&e.getFonts&&(o.add({"Open Sans":[300,600]}),l=!0),e=e||{},t=t||n;var i=e.el||document.createElement("div"),p="dark"in e&&!e.dark?"white":"black",d=e.client_id,g=e.song;return s(d,g,function(e,n){if(e)return t(e);if("track"!==n.kind)throw new Error("soundcloud-badge only supports individual tracks at the moment");i.classList["black"===p?"remove":"add"]("npm-scb-white"),i.innerHTML=h({artwork:n.artwork_url||n.user.avatar_url,artist:n.user.username,title:n.title,icon:u[p],urls:{song:n.permalink_url,artist:n.user.permalink_url}}),document.body.appendChild(i),t(null,n.stream_url+"?client_id="+d,n,i)}),i}var s=e("soundcloud-resolve"),o=e("google-fonts"),r=e("minstache"),a=e("insert-css"),u=(e("fs"),{black:"http://developers.soundcloud.com/assets/logo_black.png",white:"http://developers.soundcloud.com/assets/logo_white.png"});t.exports=i;var c=!1,l=!1,h=null},{fs:"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/browserify/lib/_empty.js","google-fonts":"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/google-fonts/index.js","insert-css":"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/insert-css/index.js",minstache:"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/minstache/index.js","soundcloud-resolve":"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/soundcloud-resolve/browser.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/google-fonts/index.js":[function(e,t){function n(e){var t=s(e);return'<link href="'+t+'" rel="stylesheet" type="text/css">'}function i(e){var t=s(e),n=document.createElement("link");return n.setAttribute("href",t),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n}function s(e){var t=Object.keys(e).map(function(t){var n=e[t];return t=t.replace(/\s+/,"+"),"boolean"==typeof n?t:t+":"+r(n).join(",")}).join("|");return"http://fonts.googleapis.com/css?family="+t}function o(e){var t=i(e);return document.head.appendChild(t),t}function r(e){return Array.isArray(e)?e:[e]}t.exports=n,t.exports.add=o},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/insert-css/index.js":[function(e,t){var n=[];t.exports=function(e){if(!(n.indexOf(e)>=0)){n.push(e);var t=document.createElement("style"),i=document.createTextNode(e);t.appendChild(i),document.head.childNodes.length?document.head.insertBefore(t,document.head.childNodes[0]):document.head.appendChild(t)}}},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/minstache/index.js":[function(e,t,n){function i(e,t){t=t||{};var n=s(e);return n(t)}function s(e){for(var t,n=[],i=r(e),s=0;s<i.length;++s)if(t=i[s],s%2==0)n.push('"'+t.replace(/"/g,'\\"')+'"');else switch(t[0]){case"/":t=t.slice(1),n.push(") + ");break;case"^":t=t.slice(1),o(t),n.push(' + section(obj, "'+t+'", true, ');break;case"#":t=t.slice(1),o(t),n.push(' + section(obj, "'+t+'", false, ');break;case"!":t=t.slice(1),o(t),n.push(" + obj."+t+" + ");break;default:o(t),n.push(" + escape(obj."+t+") + ")}return n="\n"+a(c.toString())+";\n\n"+a(u.toString())+";\n\n  return "+n.join("").replace(/\n/g,"\\n"),new Function("obj",n)}function o(e){if(!e.match(/^[\w.]+$/))throw new Error('invalid property "'+e+'"')}function r(e){return e.split(/\{\{|\}\}/)}function a(e){return e.replace(/^/gm,"  ")}function u(e,t,n,i){var s=e[t];return"function"==typeof s?s.call(e,i):(n&&(s=!s),s?i:"")}function c(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}n=t.exports=i,n.compile=s},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/soundcloud-resolve/browser.js":[function(e,t){function n(e,t,n){var o="http://api.soundcloud.com/resolve.json?"+i.stringify({url:t,client_id:e});s({uri:o,method:"GET"},function(e,t,i){if(e)return n(e);try{i=JSON.parse(i)}catch(s){return n(s)}return i.errors?n(new Error(i.errors[0].error_message)):n(null,i)})}var i=e("querystring"),s=e("xhr");t.exports=n},{querystring:"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/browserify/node_modules/querystring-es3/index.js",xhr:"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/soundcloud-resolve/node_modules/xhr/index.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/soundcloud-resolve/node_modules/xhr/index.js":[function(e,t){function n(e,t){function n(){4===l.readyState&&s()}function s(){var e=null,n=l.statusCode=l.status,i=l.body=l.response||l.responseText||l.responseXML;if(0===n||n>=400&&600>n){var s=l.responseText||r[String(l.status).charAt(0)];e=new Error(s),e.statusCode=l.status}if(m)try{i=l.body=JSON.parse(i)}catch(o){}t(e,l,i)}function c(e){t(e,l)}"string"==typeof e&&(e={uri:e}),e=e||{},t=o(t);var l;l=e.cors?new u:new a;var h=l.url=e.uri,p=l.method=e.method||"GET",d=e.body||e.data,g=l.headers=e.headers||{},m=!1;return"json"in e&&(m=!0,g["Content-Type"]="application/json",d=JSON.stringify(e.json)),l.onreadystatechange=n,l.onload=s,l.onerror=c,l.onprogress=function(){},l.ontimeout=i,l.open(p,h),e.cors&&(l.withCredentials=!0),l.timeout="timeout"in e?e.timeout:5e3,l.setRequestHeader&&Object.keys(g).forEach(function(e){l.setRequestHeader(e,g[e])}),l.send(d),l}function i(){}var s=e("global/window"),o=e("once"),r={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},a=s.XMLHttpRequest||i,u="withCredentials"in new a?s.XMLHttpRequest:s.XDomainRequest;t.exports=n},{"global/window":"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/soundcloud-resolve/node_modules/xhr/node_modules/global/window.js",once:"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/soundcloud-resolve/node_modules/xhr/node_modules/once/once.js"}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/soundcloud-resolve/node_modules/xhr/node_modules/global/window.js":[function(e,t){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/soundcloud-badge/node_modules/soundcloud-resolve/node_modules/xhr/node_modules/once/once.js":[function(e,t){function n(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],"/Users/gregtatum/Dropbox/greg-sites/polar/node_modules/underscore/underscore.js":[function(e,t,n){(function(){var e=this,i=e._,s=Array.prototype,o=Object.prototype,r=Function.prototype,a=s.push,u=s.slice,c=s.concat,l=o.toString,h=o.hasOwnProperty,p=Array.isArray,d=Object.keys,g=r.bind,m=function(e){return e instanceof m?e:this instanceof m?(this._wrapped=e,void 0):new m(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=m),n._=m):e._=m,m.VERSION="1.7.0";var f=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,s){return e.call(t,n,i,s)};case 4:return function(n,i,s,o){return e.call(t,n,i,s,o)}}return function(){return e.apply(t,arguments)}};m.iteratee=function(e,t,n){return null==e?m.identity:m.isFunction(e)?f(e,t,n):m.isObject(e)?m.matches(e):m.property(e)},m.each=m.forEach=function(e,t,n){if(null==e)return e;t=f(t,n);var i,s=e.length;if(s===+s)for(i=0;s>i;i++)t(e[i],i,e);else{var o=m.keys(e);for(i=0,s=o.length;s>i;i++)t(e[o[i]],o[i],e)}return e},m.map=m.collect=function(e,t,n){if(null==e)return[];t=m.iteratee(t,n);for(var i,s=e.length!==+e.length&&m.keys(e),o=(s||e).length,r=Array(o),a=0;o>a;a++)i=s?s[a]:a,r[a]=t(e[i],i,e);return r};var b="Reduce of empty array with no initial value";m.reduce=m.foldl=m.inject=function(e,t,n,i){null==e&&(e=[]),t=f(t,i,4);var s,o=e.length!==+e.length&&m.keys(e),r=(o||e).length,a=0;if(arguments.length<3){if(!r)throw new TypeError(b);n=e[o?o[a++]:a++]}for(;r>a;a++)s=o?o[a]:a,n=t(n,e[s],s,e);return n},m.reduceRight=m.foldr=function(e,t,n,i){null==e&&(e=[]),t=f(t,i,4);var s,o=e.length!==+e.length&&m.keys(e),r=(o||e).length;if(arguments.length<3){if(!r)throw new TypeError(b);n=e[o?o[--r]:--r]}for(;r--;)s=o?o[r]:r,n=t(n,e[s],s,e);return n},m.find=m.detect=function(e,t,n){var i;return t=m.iteratee(t,n),m.some(e,function(e,n,s){return t(e,n,s)?(i=e,!0):void 0}),i},m.filter=m.select=function(e,t,n){var i=[];return null==e?i:(t=m.iteratee(t,n),m.each(e,function(e,n,s){t(e,n,s)&&i.push(e)}),i)},m.reject=function(e,t,n){return m.filter(e,m.negate(m.iteratee(t)),n)},m.every=m.all=function(e,t,n){if(null==e)return!0;t=m.iteratee(t,n);var i,s,o=e.length!==+e.length&&m.keys(e),r=(o||e).length;for(i=0;r>i;i++)if(s=o?o[i]:i,!t(e[s],s,e))return!1;return!0},m.some=m.any=function(e,t,n){if(null==e)return!1;t=m.iteratee(t,n);var i,s,o=e.length!==+e.length&&m.keys(e),r=(o||e).length;for(i=0;r>i;i++)if(s=o?o[i]:i,t(e[s],s,e))return!0;return!1},m.contains=m.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=m.values(e)),m.indexOf(e,t)>=0)},m.invoke=function(e,t){var n=u.call(arguments,2),i=m.isFunction(t);return m.map(e,function(e){return(i?t:e[t]).apply(e,n)})},m.pluck=function(e,t){return m.map(e,m.property(t))},m.where=function(e,t){return m.filter(e,m.matches(t))},m.findWhere=function(e,t){return m.find(e,m.matches(t))},m.max=function(e,t,n){var i,s,o=-1/0,r=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:m.values(e);for(var a=0,u=e.length;u>a;a++)i=e[a],i>o&&(o=i)}else t=m.iteratee(t,n),m.each(e,function(e,n,i){s=t(e,n,i),(s>r||s===-1/0&&o===-1/0)&&(o=e,r=s)});return o},m.min=function(e,t,n){var i,s,o=1/0,r=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:m.values(e);for(var a=0,u=e.length;u>a;a++)i=e[a],o>i&&(o=i)}else t=m.iteratee(t,n),m.each(e,function(e,n,i){s=t(e,n,i),(r>s||1/0===s&&1/0===o)&&(o=e,r=s)});return o},m.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:m.values(e),i=n.length,s=Array(i),o=0;i>o;o++)t=m.random(0,o),t!==o&&(s[o]=s[t]),s[t]=n[o];return s},m.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=m.values(e)),e[m.random(e.length-1)]):m.shuffle(e).slice(0,Math.max(0,t))},m.sortBy=function(e,t,n){return t=m.iteratee(t,n),m.pluck(m.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var v=function(e){return function(t,n,i){var s={};return n=m.iteratee(n,i),m.each(t,function(i,o){var r=n(i,o,t);e(s,i,r)}),s}};m.groupBy=v(function(e,t,n){m.has(e,n)?e[n].push(t):e[n]=[t]}),m.indexBy=v(function(e,t,n){e[n]=t}),m.countBy=v(function(e,t,n){m.has(e,n)?e[n]++:e[n]=1}),m.sortedIndex=function(e,t,n,i){n=m.iteratee(n,i,1);for(var s=n(t),o=0,r=e.length;r>o;){var a=o+r>>>1;n(e[a])<s?o=a+1:r=a}return o},m.toArray=function(e){return e?m.isArray(e)?u.call(e):e.length===+e.length?m.map(e,m.identity):m.values(e):[]},m.size=function(e){return null==e?0:e.length===+e.length?e.length:m.keys(e).length},m.partition=function(e,t,n){t=m.iteratee(t,n);var i=[],s=[];return m.each(e,function(e,n,o){(t(e,n,o)?i:s).push(e)}),[i,s]},m.first=m.head=m.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:u.call(e,0,t)},m.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},m.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},m.rest=m.tail=m.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},m.compact=function(e){return m.filter(e,m.identity)};var y=function(e,t,n,i){if(t&&m.every(e,m.isArray))return c.apply(i,e);for(var s=0,o=e.length;o>s;s++){var r=e[s];m.isArray(r)||m.isArguments(r)?t?a.apply(i,r):y(r,t,n,i):n||i.push(r)}return i};m.flatten=function(e,t){return y(e,t,!1,[])},m.without=function(e){return m.difference(e,u.call(arguments,1))},m.uniq=m.unique=function(e,t,n,i){if(null==e)return[];m.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=m.iteratee(n,i));for(var s=[],o=[],r=0,a=e.length;a>r;r++){var u=e[r];if(t)r&&o===u||s.push(u),o=u;else if(n){var c=n(u,r,e);m.indexOf(o,c)<0&&(o.push(c),s.push(u))}else m.indexOf(s,u)<0&&s.push(u)}return s},m.union=function(){return m.uniq(y(arguments,!0,!0,[]))},m.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,i=0,s=e.length;s>i;i++){var o=e[i];if(!m.contains(t,o)){for(var r=1;n>r&&m.contains(arguments[r],o);r++);r===n&&t.push(o)}}return t},m.difference=function(e){var t=y(u.call(arguments,1),!0,!0,[]);return m.filter(e,function(e){return!m.contains(t,e)})},m.zip=function(e){if(null==e)return[];for(var t=m.max(arguments,"length").length,n=Array(t),i=0;t>i;i++)n[i]=m.pluck(arguments,i);return n},m.object=function(e,t){if(null==e)return{};for(var n={},i=0,s=e.length;s>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},m.indexOf=function(e,t,n){if(null==e)return-1;var i=0,s=e.length;if(n){if("number"!=typeof n)return i=m.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,s+n):n}for(;s>i;i++)if(e[i]===t)return i;return-1
},m.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=e.length;for("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1));--i>=0;)if(e[i]===t)return i;return-1},m.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),s=Array(i),o=0;i>o;o++,e+=n)s[o]=e;return s};var x=function(){};m.bind=function(e,t){var n,i;if(g&&e.bind===g)return g.apply(e,u.call(arguments,1));if(!m.isFunction(e))throw new TypeError("Bind must be called on a function");return n=u.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(u.call(arguments)));x.prototype=e.prototype;var s=new x;x.prototype=null;var o=e.apply(s,n.concat(u.call(arguments)));return m.isObject(o)?o:s}},m.partial=function(e){var t=u.call(arguments,1);return function(){for(var n=0,i=t.slice(),s=0,o=i.length;o>s;s++)i[s]===m&&(i[s]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},m.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=m.bind(e[n],e);return e},m.memoize=function(e,t){var n=function(i){var s=n.cache,o=t?t.apply(this,arguments):i;return m.has(s,o)||(s[o]=e.apply(this,arguments)),s[o]};return n.cache={},n},m.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},m.defer=function(e){return m.delay.apply(m,[e,1].concat(u.call(arguments,1)))},m.throttle=function(e,t,n){var i,s,o,r=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:m.now(),r=null,o=e.apply(i,s),r||(i=s=null)};return function(){var c=m.now();a||n.leading!==!1||(a=c);var l=t-(c-a);return i=this,s=arguments,0>=l||l>t?(clearTimeout(r),r=null,a=c,o=e.apply(i,s),r||(i=s=null)):r||n.trailing===!1||(r=setTimeout(u,l)),o}},m.debounce=function(e,t,n){var i,s,o,r,a,u=function(){var c=m.now()-r;t>c&&c>0?i=setTimeout(u,t-c):(i=null,n||(a=e.apply(o,s),i||(o=s=null)))};return function(){o=this,s=arguments,r=m.now();var c=n&&!i;return i||(i=setTimeout(u,t)),c&&(a=e.apply(o,s),o=s=null),a}},m.wrap=function(e,t){return m.partial(t,e)},m.negate=function(e){return function(){return!e.apply(this,arguments)}},m.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},m.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},m.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},m.once=m.partial(m.before,2),m.keys=function(e){if(!m.isObject(e))return[];if(d)return d(e);var t=[];for(var n in e)m.has(e,n)&&t.push(n);return t},m.values=function(e){for(var t=m.keys(e),n=t.length,i=Array(n),s=0;n>s;s++)i[s]=e[t[s]];return i},m.pairs=function(e){for(var t=m.keys(e),n=t.length,i=Array(n),s=0;n>s;s++)i[s]=[t[s],e[t[s]]];return i},m.invert=function(e){for(var t={},n=m.keys(e),i=0,s=n.length;s>i;i++)t[e[n[i]]]=n[i];return t},m.functions=m.methods=function(e){var t=[];for(var n in e)m.isFunction(e[n])&&t.push(n);return t.sort()},m.extend=function(e){if(!m.isObject(e))return e;for(var t,n,i=1,s=arguments.length;s>i;i++){t=arguments[i];for(n in t)h.call(t,n)&&(e[n]=t[n])}return e},m.pick=function(e,t,n){var i,s={};if(null==e)return s;if(m.isFunction(t)){t=f(t,n);for(i in e){var o=e[i];t(o,i,e)&&(s[i]=o)}}else{var r=c.apply([],u.call(arguments,1));e=new Object(e);for(var a=0,l=r.length;l>a;a++)i=r[a],i in e&&(s[i]=e[i])}return s},m.omit=function(e,t,n){if(m.isFunction(t))t=m.negate(t);else{var i=m.map(c.apply([],u.call(arguments,1)),String);t=function(e,t){return!m.contains(i,t)}}return m.pick(e,t,n)},m.defaults=function(e){if(!m.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];for(var s in i)void 0===e[s]&&(e[s]=i[s])}return e},m.clone=function(e){return m.isObject(e)?m.isArray(e)?e.slice():m.extend({},e):e},m.tap=function(e,t){return t(e),e};var j=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof m&&(e=e._wrapped),t instanceof m&&(t=t._wrapped);var s=l.call(e);if(s!==l.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]===e)return i[o]===t;var r=e.constructor,a=t.constructor;if(r!==a&&"constructor"in e&&"constructor"in t&&!(m.isFunction(r)&&r instanceof r&&m.isFunction(a)&&a instanceof a))return!1;n.push(e),i.push(t);var u,c;if("[object Array]"===s){if(u=e.length,c=u===t.length)for(;u--&&(c=j(e[u],t[u],n,i)););}else{var h,p=m.keys(e);if(u=p.length,c=m.keys(t).length===u)for(;u--&&(h=p[u],c=m.has(t,h)&&j(e[h],t[h],n,i)););}return n.pop(),i.pop(),c};m.isEqual=function(e,t){return j(e,t,[],[])},m.isEmpty=function(e){if(null==e)return!0;if(m.isArray(e)||m.isString(e)||m.isArguments(e))return 0===e.length;for(var t in e)if(m.has(e,t))return!1;return!0},m.isElement=function(e){return!(!e||1!==e.nodeType)},m.isArray=p||function(e){return"[object Array]"===l.call(e)},m.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},m.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){m["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),m.isArguments(arguments)||(m.isArguments=function(e){return m.has(e,"callee")}),"function"!=typeof/./&&(m.isFunction=function(e){return"function"==typeof e||!1}),m.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},m.isNaN=function(e){return m.isNumber(e)&&e!==+e},m.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===l.call(e)},m.isNull=function(e){return null===e},m.isUndefined=function(e){return void 0===e},m.has=function(e,t){return null!=e&&h.call(e,t)},m.noConflict=function(){return e._=i,this},m.identity=function(e){return e},m.constant=function(e){return function(){return e}},m.noop=function(){},m.property=function(e){return function(t){return t[e]}},m.matches=function(e){var t=m.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var i=0;n>i;i++){var s=t[i],o=s[0];if(s[1]!==e[o]||!(o in e))return!1}return!0}},m.times=function(e,t,n){var i=Array(Math.max(0,e));t=f(t,n,1);for(var s=0;e>s;s++)i[s]=t(s);return i},m.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},m.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E=m.invert(w),k=function(e){var t=function(t){return e[t]},n="(?:"+m.keys(e).join("|")+")",i=RegExp(n),s=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(s,t):e}};m.escape=k(w),m.unescape=k(E),m.result=function(e,t){if(null==e)return void 0;var n=e[t];return m.isFunction(n)?e[t]():n};var D=0;m.uniqueId=function(e){var t=++D+"";return e?e+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,_={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,C=function(e){return"\\"+_[e]};m.template=function(e,t,n){!t&&n&&(t=n),t=m.defaults({},t,m.templateSettings);var i=RegExp([(t.escape||M).source,(t.interpolate||M).source,(t.evaluate||M).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,i,r,a){return o+=e.slice(s,a).replace(T,C),s=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var r=new Function(t.variable||"obj","_",o)}catch(a){throw a.source=o,a}var u=function(e){return r.call(this,e,m)},c=t.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},m.chain=function(e){var t=m(e);return t._chain=!0,t};var S=function(e){return this._chain?m(e).chain():e};m.mixin=function(e){m.each(m.functions(e),function(t){var n=m[t]=e[t];m.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),S.call(this,n.apply(m,e))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];m.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],S.call(this,n)}}),m.each(["concat","join","slice"],function(e){var t=s[e];m.prototype[e]=function(){return S.call(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this)},{}]},{},["./js/Main.js"]);